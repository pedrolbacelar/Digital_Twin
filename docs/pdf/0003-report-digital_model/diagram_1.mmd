flowchart TD
    A[Load JSON] --> B[Create Machines from nodes]
    B --> C[Create Queues from arcs]
    C --> D[queue_allocation]
    D --> E[merge_queues]
    E --> F[initial_allocation if initial]
    F --> G[discovery_working_parts]
    G --> H[find_last_part_id]
    H --> I[cluster_discovery]
    I --> J[create_conveyors]
    J --> K[branch_discovery]
    K --> L[setting_stop_machines]
    L --> M[setting_allocation_counter]
    M --> N[check_queue_capacity]